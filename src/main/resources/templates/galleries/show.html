<!DOCTYPE html>
<html lang="en" xmlns:th="https://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head th:replace="partials/head :: head('MyPhotos')">
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<nav th:replace="partials/navbar :: navbar"></nav>
<h1>Gallery</h1>
<h2 th:text="${gallery.getName()}"></h2>

<div th:each="item : ${photos}">
    <div style="height: 200px; width: 200px; border: black solid 1px; background-color: coral;" th:text="${item.getPictureUrl()}"></div>
    <h4 th:text="${item.getComment()}"></h4>
    <div th:if="${sessionUser.getUsername()} == ${displayUser.getUsername()}">
        <!--    todo create view/controller to edit/delete photos-->
        <div style="border: rebeccapurple solid 1px;">
            <form th:action="@{/{username}/photo/{id}/edit (username=${sessionUser.getUsername()}, id=${item.getId()})}" th:object="${displayPhoto}" method="POST" class="p-3">
                <label for="caption">Caption</label>
                <textarea id="caption" class="form-control" rows="1" cols="5" th:field="*{comment}"></textarea>
                <button type="submit" class="btn btn-primary">Change Picture Caption</button>
            </form>
            <form th:action="@{/{username}/photo/{id}/delete (username=${sessionUser.getUsername()}, id=${item.getId()})}" method="post" th:object="${displayPhoto}">
                <input type="submit" name="delete" VALUE="DELETE"/>
            </form>
        </div>
    </div>
</div>

<div th:if="${sessionUser.getUsername()} == ${displayUser.getUsername()}">
<!--        todo create add photo form/controller-->
    <form th:action="@{/{username}/gallery/{id}/create-photo (username=${sessionUser.getUsername()}, id=${gallery.getId()})}" method="get" class="p-3">
        <input type="submit" name="add-photo" VALUE="Add Photo"/>
    </form>
    <div style="border: coral solid 1px;">
        <form th:action="@{/{username}/gallery/{id}/edit (username=${sessionUser.getUsername()}, id=${gallery.getId()})}" th:object="${gallery}" method="POST" class="p-3">
            <label for="galleryName">Gallery Name</label>
            <textarea id="galleryName" class="form-control" rows="1" cols="5" th:field="*{name}"></textarea>
            <button type="submit" class="btn btn-primary">Change Gallery Name</button>
        </form>
        <form th:action="@{/{username}/gallery/{id}/delete (username=${sessionUser.getUsername()}, id=${gallery.getId()})}" th:object="${gallery}" method="post" class="p-3">
            <input type="submit" name="delete" VALUE="DELETE"/>
        </form>
    </div>
</div>

    <footer th:replace="partials/footer :: footer"></footer>
</body>
</html>